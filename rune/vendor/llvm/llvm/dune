(rule
 (targets llvm_cflags.sexp llvm_libs_core.sexp llvm_libs_executionengine.sexp 
          llvm_libs_analysis.sexp llvm_libs_target.sexp llvm_libs_bitreader.sexp 
          llvm_libs_bitwriter.sexp llvm_libs_transforms.sexp llvm_libs_all.sexp 
          llvm_version.ml)
 (deps (:discover ../config/discover.exe))
 (action (run %{discover})))

(library
 (name llvm)
 (public_name rune.llvm)
 (modules llvm)
 (foreign_stubs
  (language c)
  (names llvm_ocaml)
  (flags (:include llvm_cflags.sexp)))
 (c_library_flags (:include llvm_libs_core.sexp)))